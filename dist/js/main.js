(()=>{var t={798:function(t,e,n){t=n.nmd(t),function(n,i){"use strict";var r={};n.PubSub=r,function(t){var e={},n=-1,i="*";function r(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}function o(t){return function(){throw t}}function s(t,e,n){try{t(e,n)}catch(t){setTimeout(o(t),0)}}function a(t,e,n){t(e,n)}function c(t,n,i,r){var o,c=e[n],l=r?a:s;if(Object.prototype.hasOwnProperty.call(e,n))for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&l(c[o],t,i)}function l(t,e,n){return function(){var r=String(t),o=r.lastIndexOf(".");for(c(t,t,e,n);-1!==o;)o=(r=r.substr(0,o)).lastIndexOf("."),c(t,r,e,n);c(t,i,e,n)}}function u(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&r(e[n]))}function d(t){for(var e=String(t),n=u(e)||u(i),r=e.lastIndexOf(".");!n&&-1!==r;)r=(e=e.substr(0,r)).lastIndexOf("."),n=u(e);return n}function p(t,e,n,i){var r=l(t="symbol"==typeof t?t.toString():t,e,i);return!!d(t)&&(!0===n?r():setTimeout(r,0),!0)}t.publish=function(e,n){return p(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return p(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,i){if("function"!=typeof i)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var r="uid_"+String(++n);return e[t][r]=i,r},t.subscribeAll=function(e){return t.subscribe(i,e)},t.subscribeOnce=function(e,n){var i=t.subscribe(e,(function(){t.unsubscribe(i),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,i,r=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(i in e[n])r++;break}return r},t.getSubscriptions=function(t){var n,i=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&i.push(n);return i},t.unsubscribe=function(n){var i,r,o,s=function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1},a="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||s(n)),c=!a&&"string"==typeof n,l="function"==typeof n,u=!1;if(!a){for(i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(r=e[i],c&&r[n]){delete r[n],u=n;break}if(l)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&r[o]===n&&(delete r[o],u=!0)}return u}t.clearSubscriptions(n)}}(r),void 0!==t&&t.exports&&(e=t.exports=r),e.PubSub=r,t.exports=e=r}("object"==typeof window&&window||this)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";class Task{constructor(t,e=null){this._title=t,this._dueDate=e,this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set dueDate(t){this._dueDate=t}get dueDate(){return this._dueDate}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}class TaskList extends Task{constructor(t,e=null){super(t,e),this._tasks=[],this._isDone=!1}set tasks(t){this._tasks=t}get tasks(){return this._tasks}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}class Project{constructor(t,e=null){this._title=t,this._description=e,this._tasks=[],this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set description(t){this._description=t}get description(){return this._description}set tasks(t){this._tasks=t}addTask(t){this._tasks.push(t)}get tasks(){return this._tasks}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}function t(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function e(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}var i=36e5,r={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},o=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,s=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,a=/^([+-])(\d{2})(?::?(\d{2}))?$/;function c(t){var e,n={},i=t.split(r.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?(n.date=null,e=i[0]):(n.date=i[0],e=i[1],r.timeZoneDelimiter.test(n.date)&&(n.date=t.split(r.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var o=r.timezone.exec(e);o?(n.time=e.replace(o[1],""),n.timezone=o[1]):n.time=e}return n}function l(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:null};var r=i[1]&&parseInt(i[1]),o=i[2]&&parseInt(i[2]);return{year:null==o?r:100*o,restDateString:t.slice((i[1]||i[2]).length)}}function u(t,e){if(null===e)return null;var n=t.match(o);if(!n)return null;var i=!!n[4],r=d(n[1]),s=d(n[2])-1,a=d(n[3]),c=d(n[4]),l=d(n[5])-1;if(i)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,c,l)?function(t,e,n){var i=new Date(0);i.setUTCFullYear(t,0,4);var r=i.getUTCDay()||7,o=7*(e-1)+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}(e,c,l):new Date(NaN);var u=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(v[e]||(h(t)?29:28))}(e,s,a)&&function(t,e){return e>=1&&e<=(h(t)?366:365)}(e,r)?(u.setUTCFullYear(e,s,Math.max(r,a)),u):new Date(NaN)}function d(t){return t?parseInt(t):1}function p(t){var e=t.match(s);if(!e)return null;var n=f(e[1]),r=f(e[2]),o=f(e[3]);return function(t,e,n){if(24===t)return 0===e&&0===n;return n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,r,o)?n*i+6e4*r+1e3*o:NaN}function f(t){return t&&parseFloat(t.replace(",","."))||0}function b(t){if("Z"===t)return 0;var e=t.match(a);if(!e)return 0;var n="+"===e[1]?-1:1,r=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,o)?n*(r*i+6e4*o):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function h(t){return t%400==0||t%4==0&&t%100}var m=n(798),g=n.n(m);function k(t){return`${t.map(((t,e)=>`<li data-idx="${e}"><div class="circle-status"></div>${t.title}</li>`)).join("")}`}function y(t){return g().subscribe("projectsUpdated",((t,e)=>function(t,e){console.log("projects changed, need to refresh."),document.querySelector("#projects ul").innerHTML=k(e)}(0,e))),function(t){return`\n    <div id="projects">\n    <ul>\n    ${k(t)}\n    </ul>\n    </div>`}(t)}function j(t){g().publish("addProjectClick",null)}function w(t){if("li"!==t.target.nodeName.toLowerCase())return;switch(t.target.dataset.name){case"inbox":g().publish("inboxNavClick",null);break;case"upcoming":g().publish("upcomingNavClick",null);break;case"today":g().publish("todayNavClick",null);break;case"urgent":g().publish("urgentNavClick",null)}}function D(t){"li"===t.target.nodeName.toLowerCase()&&(console.log(`Clicked on ${t.target.textContent}`),g().publish("getProject",t.target.dataset.idx))}function T(t,e){const n=document.createElement("div");n.setAttribute("id","side-nav"),n.innerHTML=function(t){return`\n        \n    <div id="navigation">\n    <div id="search">\n        <input type="text" name="search-query" size="15"> \n    </div>\n    <nav>\n        <ul>\n            <li data-name="inbox">Inbox</li>\n            <li data-name="upcoming">Upcoming</li>\n            <li data-name="today">Due Today</li>\n            <li data-name="urgent">Urgent</li>\n        </ul>\n    </nav>\n    </div>\n\n        ${y(t)}\n        <div id="add-project">\n            <div id="add-project-btn">+ New Project</div>\n        </div>\n    `}(e),n.querySelector("#add-project-btn").addEventListener("click",j);n.querySelector("nav ul").addEventListener("click",w);n.querySelector("#projects ul").addEventListener("click",D),t.appendChild(n)}function C(t){return`\n        <div class="task">\n            <div class="task-title">\n                <h2>${t.title}</h2></span>\n                <div class="edit-task-btn">...</div>\n            </div>                           \n        </div>\n    `}function N(t){return`\n        <div class="task">\n            <div class="task-title">\n                <h2>${t.title}</h2>\n                <div class="edit-task-btn">...</div>\n            </div>\n            <div class="task-todos">\n                <ul>\n                ${t.tasks.map((t=>function(t){return`<li><input type="checkbox" value="done" ${t.isDone?"checked":""}>${t.title}</li>`}(t))).join("")}                                                       \n                </ul>\n            </div>                            \n        </div>\n    `}function x(t){"li"===t.target.nodeName.toLowerCase()&&t.srcElement.classList.toggle("done")}function P(t){console.log("Clicked edit task")}function S(t,e){let n=document.querySelector("#main-todos"),i=`\n        ${r=e.title,o=e.description,`\n        <div class="project-details">\n        <h1 class="project-title" data-title="${r}">${r}</h1>\n        <p class="project-description">${o}</p>\n        </div>\n    `}\n        <div class="project-todos">\n        ${function(t){document.createElement("div").classList.add("project-todos");let e="";for(const n of t)"TaskList"===n.constructor.name?e+=N(n):"Task"===n.constructor.name&&(e+=C(n));return e}(e.tasks)}\n        </div>\n    `;var r,o;n.innerHTML=i;n.querySelector(".project-todos").addEventListener("click",x);n.querySelectorAll(".edit-task-btn").forEach((t=>t.addEventListener("click",P)))}const O=`\n    ${PubSub.subscribe("returnProject",((t,e)=>S(0,e))),PubSub.subscribe("projectUpdated",((t,e)=>S(0,e))),'\n    <div id="main-todos">\n    </div>\n'}\n    \n    <div id="main-aside">\n    <div id="main-aside-top">\n        <div id="edit-project-btn">\n        -\n        </div>\n    </div>\n    <div id="main-aside-bottom">\n        <div id="add-todo-btn">\n            +\n        </div>\n    </div>\n    </div>\n\n`;function _(){const t=document.querySelector(".project-title");return t?t.dataset.title:null}function $(t){const e=_();g().publish("editProjectClick",e)}function E(t){const e=_();g().publish("addTaskClick",e)}function L(t){return`\n        <div class="modal-content">\n            <div class="modal-content-header"><h1>${t}</h1></div>\n            <div class="modal-content-body">\n                <form>\n                </form>\n            </div>\n        </div>    \n    `}function q(t){t.preventDefault();const e={name:t.target.querySelector("#name").value,description:t.target.querySelector("#description").value};g().publish("newProject",e),Z()}function H(t){const e=document.querySelector(".modal-content");let n=t.target;do{if(n==e)return;n=n.parentNode}while(n);Z()}function A(t,e,n){let i=document.createElement("label");i.textContent=e,i.setAttribute("for",t),n.appendChild(i)}function U(t,e,n,i){let r=document.createElement("input");r.type=t,r.setAttribute("id",e),n&&r.setAttribute("required",""),i.appendChild(r)}function M(t,e){let n=document.createElement("input");n.type="submit",n.setAttribute("value",t),e.appendChild(n)}function I(){let t=document.querySelector(".modal");t.innerHTML=L("Add Project");let e=t.querySelector("form");e.setAttribute("id","add-project"),A("name","Project name:",e),U("text","name",!0,e),A("description","Project description:",e),U("text","description",!1,e),M("Ok",e),e.addEventListener("submit",q),t.style.display="flex"}function z(t,e){let n=document.querySelector(".modal");n.innerHTML=L("Add Task");let i=n.querySelector("form");i.setAttribute("id","add-task"),A("title","Task title:",i),U("text","title",!0,i),A("duedate","Due date:",i),U("date","duedate",!1,i),M("Ok",i),i.addEventListener("submit",(t=>function(t,e){t.preventDefault();const n={title:t.target.querySelector("#title").value,duedate:t.target.querySelector("#duedate").value,projectTitle:e};g().publish("newTask",n),Z()}(t,e))),n.style.display="flex"}function Z(){let t=document.querySelector(".modal");t.innerHTML="",t.style.display="none"}class App{constructor(t){this.projects=t}addNewProject(t,e){console.log("New project added.");const n=new Project(e.name,e.description);this.projects.push(n),g().publish("projectsUpdated",this.projects)}addNewTask(n,i){console.log(`Adding task to the ${i.projectTitle} project`);const r=new Task(i.title,function(n,i){e(1,arguments);var r=i||{},o=null==r.additionalDigits?2:t(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof n&&"[object String]"!==Object.prototype.toString.call(n))return new Date(NaN);var s,a=c(n);if(a.date){var d=l(a.date,o);s=u(d.restDateString,d.year)}if(isNaN(s)||!s)return new Date(NaN);var f,v=s.getTime(),h=0;if(a.time&&(h=p(a.time),isNaN(h)||null===h))return new Date(NaN);if(!a.timezone){var m=new Date(v+h),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return f=b(a.timezone),isNaN(f)?new Date(NaN):new Date(v+h+f)}(i.duedate));if(null==i.projectTitle)return void console.log("project was null, add to the inbox?!?");let o=null;for(let t=0;t<this.projects.length;t++)if(this.projects[t].title==i.projectTitle){this.projects[t].addTask(r),o=this.projects[t];break}g().publish("projectUpdated",o)}getProject(t,e){g().publish("returnProject",this.projects[e])}inboxClickHandler(){console.log("inbox clicked")}upcomingClickHandler(){console.log("upcoming clicked")}todayClickHandler(){console.log("today clicked")}urgentClickHandler(){console.log("urgent clicked")}editProjectHandler(t,e){console.log(`Clicked on edit project. Editing ${e}`)}}function F(t,e){let n=[];for(let i=1;i<=t;i++){const t=new TaskList(`Main task #${i}`);let r=[];for(let t=1;t<=e;t++){let e=new Task(`a subtask #${t}`);1==Math.round(Math.random())&&(e.isDone=!0),r.push(e)}t.tasks=r,n.push(t)}return n.push(new Task("A random task without subtasks")),n}!function(){let t=document.getElementById("content");const e=function(t){let e=[];for(let n=1;n<=t;n++){let t=new Project(`Project ${n}`,`This is a placeholder project description for project #${n}`);t.tasks=F(3,4),e.push(t)}return e}(4),n=new App(e);T(t,e),function(t){const e=document.createElement("div");e.setAttribute("id","main-content"),e.innerHTML=O,e.querySelector("#edit-project-btn").addEventListener("click",$),e.querySelector("#add-todo-btn").addEventListener("click",E),t.appendChild(e)}(t),function(){const t=document.createElement("div");t.setAttribute("class","modal"),t.addEventListener("mousedown",H),document.querySelector("body").appendChild(t),g().subscribe("addProjectClick",I),g().subscribe("addTaskClick",((t,e)=>z(0,e)))}(),g().subscribe("newProject",((t,e)=>n.addNewProject(t,e))),g().subscribe("newTask",((t,e)=>n.addNewTask(t,e))),g().subscribe("getProject",((t,e)=>n.getProject(t,e))),g().subscribe("inboxNavClick",n.inboxClickHandler),g().subscribe("upcomingNavClick",n.upcomingClickHandler),g().subscribe("todayNavClick",n.todayClickHandler),g().subscribe("urgentNavClick",n.urgentClickHandler),g().subscribe("editProjectClick",((t,e)=>n.editProjectHandler(t,e)))}()})()})();