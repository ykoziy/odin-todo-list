(()=>{var t={798:function(t,e,n){t=n.nmd(t),function(n,i){"use strict";var o={};n.PubSub=o,function(t){var e={},n=-1,i="*";function o(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}function r(t){return function(){throw t}}function s(t,e,n){try{t(e,n)}catch(t){setTimeout(r(t),0)}}function c(t,e,n){t(e,n)}function a(t,n,i,o){var r,a=e[n],d=o?c:s;if(Object.prototype.hasOwnProperty.call(e,n))for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&d(a[r],t,i)}function d(t,e,n){return function(){var o=String(t),r=o.lastIndexOf(".");for(a(t,t,e,n);-1!==r;)r=(o=o.substr(0,r)).lastIndexOf("."),a(t,o,e,n);a(t,i,e,n)}}function l(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&o(e[n]))}function u(t){for(var e=String(t),n=l(e)||l(i),o=e.lastIndexOf(".");!n&&-1!==o;)o=(e=e.substr(0,o)).lastIndexOf("."),n=l(e);return n}function p(t,e,n,i){var o=d(t="symbol"==typeof t?t.toString():t,e,i);return!!u(t)&&(!0===n?o():setTimeout(o,0),!0)}t.publish=function(e,n){return p(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return p(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,i){if("function"!=typeof i)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var o="uid_"+String(++n);return e[t][o]=i,o},t.subscribeAll=function(e){return t.subscribe(i,e)},t.subscribeOnce=function(e,n){var i=t.subscribe(e,(function(){t.unsubscribe(i),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,i,o=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(i in e[n])o++;break}return o},t.getSubscriptions=function(t){var n,i=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&i.push(n);return i},t.unsubscribe=function(n){var i,o,r,s=function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1},c="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||s(n)),a=!c&&"string"==typeof n,d="function"==typeof n,l=!1;if(!c){for(i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(o=e[i],a&&o[n]){delete o[n],l=n;break}if(d)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&o[r]===n&&(delete o[r],l=!0)}return l}t.clearSubscriptions(n)}}(o),void 0!==t&&t.exports&&(e=t.exports=o),e.PubSub=o,t.exports=e=o}("object"==typeof window&&window||this)}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";class Task{constructor(t,e=null){this._title=t,this._dueDate=e,this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set dueDate(t){this._dueDate=t}get dueDate(){return this._dueDate}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}class TaskList extends Task{constructor(t,e=null){super(t,e),this._tasks=[],this._isDone=!1}set tasks(t){this._tasks=t}get tasks(){return this._tasks}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}class Project{constructor(t,e=null){this._title=t,this._description=e,this._tasks=[],this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set description(t){this._description=t}get description(){return this._description}set tasks(t){this._tasks=t}get tasks(){return this._tasks}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}var t=n(798),e=n.n(t);function i(t){return`${t.map(((t,e)=>`<li data-idx="${e}"><div class="circle-status"></div>${t.title}</li>`)).join("")}`}function o(t){return e().subscribe("projectsUpdated",((t,e)=>function(t,e){console.log("projects changed, need to refresh."),document.querySelector("#projects ul").innerHTML=i(e)}(0,e))),function(t){return`\n    <div id="projects">\n    <ul>\n    ${i(t)}\n    </ul>\n    </div>`}(t)}function r(t){e().publish("addProjectClick",null)}function s(t){if("li"!==t.target.nodeName.toLowerCase())return;switch(t.target.dataset.name){case"inbox":e().publish("inboxNavClick",null);break;case"upcoming":e().publish("upcomingNavClick",null);break;case"today":e().publish("todayNavClick",null);break;case"urgent":e().publish("urgentNavClick",null)}}function c(t){"li"===t.target.nodeName.toLowerCase()&&(console.log(`Clicked on ${t.target.textContent}`),e().publish("getProject",t.target.dataset.idx))}function a(t,e){const n=document.createElement("div");n.setAttribute("id","side-nav"),n.innerHTML=function(t){return`\n        \n    <div id="navigation">\n    <div id="search">\n        <input type="text" name="search-query" size="15"> \n    </div>\n    <nav>\n        <ul>\n            <li data-name="inbox">Inbox</li>\n            <li data-name="upcoming">Upcoming</li>\n            <li data-name="today">Due Today</li>\n            <li data-name="urgent">Urgent</li>\n        </ul>\n    </nav>\n    </div>\n\n        ${o(t)}\n        <div id="add-project">\n            <div id="add-project-btn">+ New Project</div>\n        </div>\n    `}(e),n.querySelector("#add-project-btn").addEventListener("click",r);n.querySelector("nav ul").addEventListener("click",s);n.querySelector("#projects ul").addEventListener("click",c),t.appendChild(n)}function d(t){return`\n        <div class="task">\n            <div class="task-title">\n                <h2>${t.title}</h2></span>\n                <div class="edit-task-btn">...</div>\n            </div>                           \n        </div>\n    `}function l(t){return`\n        <div class="task">\n            <div class="task-title">\n                <h2>${t.title}</h2>\n                <div class="edit-task-btn">...</div>\n            </div>\n            <div class="task-todos">\n                <ul>\n                ${t.tasks.map((t=>function(t){return`<li><input type="checkbox" value="done" ${t.isDone?"checked":""}>${t.title}</li>`}(t))).join("")}                                                       \n                </ul>\n            </div>                            \n        </div>\n    `}function u(t){"li"===t.target.nodeName.toLowerCase()&&t.srcElement.classList.toggle("done")}function p(t){console.log("Clicked edit task")}function f(t,e){let n=document.querySelector("#main-todos"),i=`\n        ${o=e.title,r=e.description,`\n        <div class="project-details">\n        <h1 class="project-title" data-title="${o}">${o}</h1>\n        <p class="project-description">${r}</p>\n        </div>\n    `}\n        <div class="project-todos">\n        ${function(t){document.createElement("div").classList.add("project-todos");let e="";for(const n of t)"TaskList"===n.constructor.name?e+=l(n):"Task"===n.constructor.name&&(e+=d(n));return e}(e.tasks)}\n        </div>\n    `;var o,r;n.innerHTML=i;n.querySelector(".project-todos").addEventListener("click",u);n.querySelectorAll(".edit-task-btn").forEach((t=>t.addEventListener("click",p)))}const b=`\n    ${PubSub.subscribe("returnProject",((t,e)=>f(0,e))),'\n    <div id="main-todos">\n    </div>\n'}\n    \n    <div id="main-aside">\n    <div id="main-aside-top">\n        <div id="edit-project-btn">\n        -\n        </div>\n    </div>\n    <div id="main-aside-bottom">\n        <div id="add-todo-btn">\n            +\n        </div>\n    </div>\n    </div>\n\n`;function v(t){const n=document.querySelector(".project-title");if(!n)return;const i=n.dataset.title;e().publish("editProjectClick",i)}function h(t){console.log("Clicked on add task")}function m(t){t.preventDefault();const n={name:t.target.querySelector("#name").value,description:t.target.querySelector("#description").value};e().publish("newProject",n),O()}function y(t){const e=document.querySelector(".modal-content");let n=t.target;do{if(n==e)return;n=n.parentNode}while(n);O()}function k(t,e,n){let i=document.createElement("label");i.textContent=e,i.setAttribute("for",t),n.appendChild(i)}function g(t,e,n,i){let o=document.createElement("input");o.type=t,o.setAttribute("id",e),n&&o.setAttribute("required",""),i.appendChild(o)}function j(){let t=document.querySelector(".modal");t.innerHTML=`\n        <div class="modal-content">\n            <div class="modal-content-header"><h1>${"Add Project"}</h1></div>\n            <div class="modal-content-body">\n                <form>\n                </form>\n            </div>\n        </div>    \n    `;let e=t.querySelector("form");e.setAttribute("id","add-project"),k("name","Project name:",e),g("text","name",!0,e),k("description","Project description:",e),g("text","description",!1,e),function(t,e){let n=document.createElement("input");n.type="submit",n.setAttribute("value",t),e.appendChild(n)}("Ok",e),e.addEventListener("submit",m),t.style.display="flex"}function O(){let t=document.querySelector(".modal");t.innerHTML="",t.style.display="none"}const P=[];function w(){console.log("inbox clicked")}function x(){console.log("upcoming clicked")}function S(){console.log("today clicked")}function _(){console.log("urgent clicked")}function C(t,e){let n=[];for(let i=1;i<=t;i++){const t=new TaskList(`Main task #${i}`);let o=[];for(let t=1;t<=e;t++){let e=new Task(`a subtask #${t}`);1==Math.round(Math.random())&&(e.isDone=!0),o.push(e)}t.tasks=o,n.push(t)}return n.push(new Task("A random task without subtasks")),n}!function(){let t=document.getElementById("content");!function(t){for(let e=1;e<=t;e++){let t=new Project(`Project ${e}`,`This is a placeholder project description for project #${e}`);t.tasks=C(3,4),P.push(t)}}(4),a(t,P),function(t){const e=document.createElement("div");e.setAttribute("id","main-content"),e.innerHTML=b,e.querySelector("#edit-project-btn").addEventListener("click",v),e.querySelector("#add-todo-btn").addEventListener("click",h),t.appendChild(e)}(t),function(){const t=document.createElement("div");t.setAttribute("class","modal"),t.addEventListener("mousedown",y),document.querySelector("body").appendChild(t),e().subscribe("addProjectClick",j)}(),e().subscribe("newProject",((t,n)=>function(t,n){console.log("New project added.");const i=new Project(n.name,n.description);P.push(i),e().publish("projectsUpdated",P)}(0,n))),e().subscribe("getProject",((t,n)=>function(t,n){e().publish("returnProject",P[n])}(0,n))),e().subscribe("inboxNavClick",w),e().subscribe("upcomingNavClick",x),e().subscribe("todayNavClick",S),e().subscribe("urgentNavClick",_),e().subscribe("editProjectClick",((t,e)=>function(t,e){console.log(`Clicked on edit project. Editing ${e}`)}(0,e)))}()})()})();