(()=>{var t={798:function(t,e,n){t=n.nmd(t),function(n,i){"use strict";var r={};n.PubSub=r,function(t){var e={},n=-1,i="*";function r(t){var e;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!0;return!1}function o(t){return function(){throw t}}function s(t,e,n){try{t(e,n)}catch(t){setTimeout(o(t),0)}}function a(t,e,n){t(e,n)}function c(t,n,i,r){var o,c=e[n],l=r?a:s;if(Object.prototype.hasOwnProperty.call(e,n))for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&l(c[o],t,i)}function l(t,e,n){return function(){var r=String(t),o=r.lastIndexOf(".");for(c(t,t,e,n);-1!==o;)o=(r=r.substr(0,o)).lastIndexOf("."),c(t,r,e,n);c(t,i,e,n)}}function d(t){var n=String(t);return Boolean(Object.prototype.hasOwnProperty.call(e,n)&&r(e[n]))}function u(t){for(var e=String(t),n=d(e)||d(i),r=e.lastIndexOf(".");!n&&-1!==r;)r=(e=e.substr(0,r)).lastIndexOf("."),n=d(e);return n}function p(t,e,n,i){var r=l(t="symbol"==typeof t?t.toString():t,e,i);return!!u(t)&&(!0===n?r():setTimeout(r,0),!0)}t.publish=function(e,n){return p(e,n,!1,t.immediateExceptions)},t.publishSync=function(e,n){return p(e,n,!0,t.immediateExceptions)},t.subscribe=function(t,i){if("function"!=typeof i)return!1;t="symbol"==typeof t?t.toString():t,Object.prototype.hasOwnProperty.call(e,t)||(e[t]={});var r="uid_"+String(++n);return e[t][r]=i,r},t.subscribeAll=function(e){return t.subscribe(i,e)},t.subscribeOnce=function(e,n){var i=t.subscribe(e,(function(){t.unsubscribe(i),n.apply(this,arguments)}));return t},t.clearAllSubscriptions=function(){e={}},t.clearSubscriptions=function(t){var n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&delete e[n]},t.countSubscriptions=function(t){var n,i,r=0;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)){for(i in e[n])r++;break}return r},t.getSubscriptions=function(t){var n,i=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t)&&i.push(n);return i},t.unsubscribe=function(n){var i,r,o,s=function(t){var n;for(n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&0===n.indexOf(t))return!0;return!1},a="string"==typeof n&&(Object.prototype.hasOwnProperty.call(e,n)||s(n)),c=!a&&"string"==typeof n,l="function"==typeof n,d=!1;if(!a){for(i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(r=e[i],c&&r[n]){delete r[n],d=n;break}if(l)for(o in r)Object.prototype.hasOwnProperty.call(r,o)&&r[o]===n&&(delete r[o],d=!0)}return d}t.clearSubscriptions(n)}}(r),void 0!==t&&t.exports&&(e=t.exports=r),e.PubSub=r,t.exports=e=r}("object"==typeof window&&window||this)}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";let t=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=63&n[t];e+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return e};class Task{constructor(t,e=null){this._title=t,this._dueDate=e,this._subTasks=new Map,this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set dueDate(t){this._dueDate=t}get dueDate(){return this._dueDate}set isDone(t){this._isDone=t}get isDone(){return this._isDone}get subTasks(){return this._subTasks}hasSubtasks(){return!(0==this.subTasks.size)}addSubtask(e){let n=t(6);do{n=t(6)}while(this._subTasks.has(n));this._subTasks.set(n,e)}}class Project{constructor(t,e=null){this._title=t,this._description=e,this._tasks=new Map,this._isDone=!1}set title(t){this._title=t}get title(){return this._title}set description(t){this._description=t}get description(){return this._description}set tasks(t){this._tasks=t}addTask(e){let n=t(6);do{n=t(6)}while(this._tasks.has(n));this._tasks.set(n,e)}get tasks(){return this._tasks}set isDone(t){this._isDone=t}get isDone(){return this._isDone}}function e(t){if(null===t||!0===t||!1===t)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function i(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}var r=36e5,o={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},s=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,a=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,c=/^([+-])(\d{2})(?::?(\d{2}))?$/;function l(t){var e,n={},i=t.split(o.dateTimeDelimiter);if(i.length>2)return n;if(/:/.test(i[0])?(n.date=null,e=i[0]):(n.date=i[0],e=i[1],o.timeZoneDelimiter.test(n.date)&&(n.date=t.split(o.timeZoneDelimiter)[0],e=t.substr(n.date.length,t.length))),e){var r=o.timezone.exec(e);r?(n.time=e.replace(r[1],""),n.timezone=r[1]):n.time=e}return n}function d(t,e){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=t.match(n);if(!i)return{year:null};var r=i[1]&&parseInt(i[1]),o=i[2]&&parseInt(i[2]);return{year:null==o?r:100*o,restDateString:t.slice((i[1]||i[2]).length)}}function u(t,e){if(null===e)return null;var n=t.match(s);if(!n)return null;var i=!!n[4],r=p(n[1]),o=p(n[2])-1,a=p(n[3]),c=p(n[4]),l=p(n[5])-1;if(i)return function(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}(0,c,l)?function(t,e,n){var i=new Date(0);i.setUTCFullYear(t,0,4);var r=i.getUTCDay()||7,o=7*(e-1)+n+1-r;return i.setUTCDate(i.getUTCDate()+o),i}(e,c,l):new Date(NaN);var d=new Date(0);return function(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(v[e]||(m(t)?29:28))}(e,o,a)&&function(t,e){return e>=1&&e<=(m(t)?366:365)}(e,r)?(d.setUTCFullYear(e,o,Math.max(r,a)),d):new Date(NaN)}function p(t){return t?parseInt(t):1}function f(t){var e=t.match(a);if(!e)return null;var n=b(e[1]),i=b(e[2]),o=b(e[3]);return function(t,e,n){if(24===t)return 0===e&&0===n;return n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}(n,i,o)?n*r+6e4*i+1e3*o:NaN}function b(t){return t&&parseFloat(t.replace(",","."))||0}function h(t){if("Z"===t)return 0;var e=t.match(c);if(!e)return 0;var n="+"===e[1]?-1:1,i=parseInt(e[2]),o=e[3]&&parseInt(e[3])||0;return function(t,e){return e>=0&&e<=59}(0,o)?n*(i*r+6e4*o):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function m(t){return t%400==0||t%4==0&&t%100}var g=n(798),k=n.n(g);function y(t){return`${t.map(((t,e)=>`<li data-idx="${e}"><div class="circle-status"></div>${t.title}</li>`)).join("")}`}function j(t){return k().subscribe("projectsUpdated",((t,e)=>function(t,e){console.log("projects changed, need to refresh."),document.querySelector("#projects ul").innerHTML=y(e)}(0,e))),function(t){return`\n    <div id="projects">\n    <ul>\n    ${y(t)}\n    </ul>\n    </div>`}(t)}function w(t){k().publish("addProjectClick",null)}function T(t){if("li"!==t.target.nodeName.toLowerCase())return;switch(t.target.dataset.name){case"inbox":k().publish("inboxNavClick",null);break;case"upcoming":k().publish("upcomingNavClick",null);break;case"today":k().publish("todayNavClick",null);break;case"urgent":k().publish("urgentNavClick",null)}}function C(t){"li"===t.target.nodeName.toLowerCase()&&(console.log(`Clicked on ${t.target.textContent}`),k().publish("getProject",t.target.dataset.idx))}function S(t,e){const n=document.createElement("div");n.setAttribute("id","side-nav"),n.innerHTML=function(t){return`\n        \n    <div id="navigation">\n    <div id="search">\n        <input type="text" name="search-query" size="15"> \n    </div>\n    <nav>\n        <ul>\n            <li data-name="inbox">Inbox</li>\n            <li data-name="upcoming">Upcoming</li>\n            <li data-name="today">Due Today</li>\n            <li data-name="urgent">Urgent</li>\n        </ul>\n    </nav>\n    </div>\n\n        ${j(t)}\n        <div id="add-project">\n            <div id="add-project-btn">+ New Project</div>\n        </div>\n    `}(e),n.querySelector("#add-project-btn").addEventListener("click",w);n.querySelector("nav ul").addEventListener("click",T);n.querySelector("#projects ul").addEventListener("click",C),t.appendChild(n)}function D(t,e){return`\n        <div class="task" data-id="${t}">\n            <div class="task-title">\n                <h2>${e.title}</h2></span>\n                <div class="edit-task-btn">...</div>\n            </div>                           \n        </div>\n    `}function N(t,e){const n=[];return e.subTasks.forEach(((t,e)=>{n.push({id:e,task:t})})),`\n        <div class="task" data-id="${t}">\n            <div class="task-title">\n                <h2>${e.title}</h2>\n                <div class="edit-task-btn">...</div>\n            </div>\n            <div class="task-todos">\n                <ul>\n                ${n.map((t=>function(t,e){return`<li data-id="${t}"><input type="checkbox" value="done" ${e.isDone?"checked":""}>${e.title}</li>`}(t.id,t.task))).join("")}                                                       \n                </ul>\n            </div>                            \n        </div>\n    `}function P(t){"li"===t.target.nodeName.toLowerCase()&&t.srcElement.classList.toggle("done")}function x(t){console.log("Clicked edit task")}function O(t,e){let n=document.querySelector("#main-todos"),i=`\n        ${r=e.title,o=e.description,`\n        <div class="project-details">\n        <h1 class="project-title" data-title="${r}">${r}</h1>\n        <p class="project-description">${o}</p>\n        </div>\n    `}\n        <div class="project-todos">\n        ${function(t){document.createElement("div").classList.add("project-todos");let e="";for(const[n,i]of t)i.hasSubtasks()?e+=N(n,i):e+=D(n,i);return e}(e.tasks)}\n        </div>\n    `;var r,o;n.innerHTML=i;n.querySelector(".project-todos").addEventListener("click",P);n.querySelectorAll(".edit-task-btn").forEach((t=>t.addEventListener("click",x)))}const $=`\n    ${PubSub.subscribe("returnProject",((t,e)=>O(0,e))),PubSub.subscribe("projectUpdated",((t,e)=>O(0,e))),'\n    <div id="main-todos">\n    </div>\n'}\n    \n    <div id="main-aside">\n    <div id="main-aside-top">\n        <div id="edit-project-btn">\n        -\n        </div>\n    </div>\n    <div id="main-aside-bottom">\n        <div id="add-todo-btn">\n            +\n        </div>\n    </div>\n    </div>\n\n`;function _(){const t=document.querySelector(".project-title");return t?t.dataset.title:null}function E(t){const e=_();k().publish("editProjectClick",e)}function q(t){const e=_();k().publish("addTaskClick",e)}function L(t){return`\n        <div class="modal-content">\n            <div class="modal-content-header"><h1>${t}</h1></div>\n            <div class="modal-content-body">\n                <form>\n                </form>\n            </div>\n        </div>    \n    `}function U(t){t.preventDefault();const e={name:t.target.querySelector("#name").value,description:t.target.querySelector("#description").value};k().publish("newProject",e),F()}function A(t){const e=document.querySelector(".modal-content");let n=t.target;do{if(n==e)return;n=n.parentNode}while(n);F()}function H(t,e,n){let i=document.createElement("label");i.textContent=e,i.setAttribute("for",t),n.appendChild(i)}function M(t,e,n,i){let r=document.createElement("input");r.type=t,r.setAttribute("id",e),n&&r.setAttribute("required",""),i.appendChild(r)}function I(t,e){let n=document.createElement("input");n.type="submit",n.setAttribute("value",t),e.appendChild(n)}function z(){let t=document.querySelector(".modal");t.innerHTML=L("Add Project");let e=t.querySelector("form");e.setAttribute("id","add-project"),H("name","Project name:",e),M("text","name",!0,e),H("description","Project description:",e),M("text","description",!1,e),I("Ok",e),e.addEventListener("submit",U),t.style.display="flex"}function Z(t,e){let n=document.querySelector(".modal");n.innerHTML=L("Add Task");let i=n.querySelector("form");i.setAttribute("id","add-task"),H("title","Task title:",i),M("text","title",!0,i),H("duedate","Due date:",i),M("date","duedate",!1,i),I("Ok",i),i.addEventListener("submit",(t=>function(t,e){t.preventDefault();const n={title:t.target.querySelector("#title").value,duedate:t.target.querySelector("#duedate").value,projectTitle:e};k().publish("newTask",n),F()}(t,e))),n.style.display="flex"}function F(){let t=document.querySelector(".modal");t.innerHTML="",t.style.display="none"}class App{constructor(t){this.projects=t}addNewProject(t,e){console.log("New project added.");const n=new Project(e.name,e.description);this.projects.push(n),k().publish("projectsUpdated",this.projects)}addNewTask(t,n){console.log(`Adding task to the ${n.projectTitle} project`);const r=new Task(n.title,function(t,n){i(1,arguments);var r=n||{},o=null==r.additionalDigits?2:e(r.additionalDigits);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof t&&"[object String]"!==Object.prototype.toString.call(t))return new Date(NaN);var s,a=l(t);if(a.date){var c=d(a.date,o);s=u(c.restDateString,c.year)}if(isNaN(s)||!s)return new Date(NaN);var p,b=s.getTime(),v=0;if(a.time&&(v=f(a.time),isNaN(v)||null===v))return new Date(NaN);if(!a.timezone){var m=new Date(b+v),g=new Date(0);return g.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),g.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),g}return p=h(a.timezone),isNaN(p)?new Date(NaN):new Date(b+v+p)}(n.duedate));if(null==n.projectTitle)return void console.log("project was null, add to the inbox?!?");let o=null;for(let t=0;t<this.projects.length;t++)if(this.projects[t].title==n.projectTitle){this.projects[t].addTask(r),o=this.projects[t];break}k().publish("projectUpdated",o)}getProject(t,e){k().publish("returnProject",this.projects[e])}inboxClickHandler(){console.log("inbox clicked")}upcomingClickHandler(){console.log("upcoming clicked")}todayClickHandler(){console.log("today clicked")}urgentClickHandler(){console.log("urgent clicked")}editProjectHandler(t,e){console.log(`Clicked on edit project. Editing ${e}`)}}function Y(t,e){let n=[];for(let i=1;i<=t;i++){const t=new Task(`Main task #${i}`);for(let n=1;n<=e;n++){let e=new Task(`a subtask #${n}`);1==Math.round(Math.random())&&(e.isDone=!0),t.addSubtask(e)}n.push(t)}return n.push(new Task("A random task without subtasks")),n}!function(){let t=document.getElementById("content");const e=function(t){let e=[];for(let n=1;n<=t;n++){let t=new Project(`Project ${n}`,`This is a placeholder project description for project #${n}`);Y(3,4).forEach((e=>t.addTask(e))),e.push(t)}return e}(4),n=new App(e);S(t,e),function(t){const e=document.createElement("div");e.setAttribute("id","main-content"),e.innerHTML=$,e.querySelector("#edit-project-btn").addEventListener("click",E),e.querySelector("#add-todo-btn").addEventListener("click",q),t.appendChild(e)}(t),function(){const t=document.createElement("div");t.setAttribute("class","modal"),t.addEventListener("mousedown",A),document.querySelector("body").appendChild(t),k().subscribe("addProjectClick",z),k().subscribe("addTaskClick",((t,e)=>Z(0,e)))}(),k().subscribe("newProject",((t,e)=>n.addNewProject(t,e))),k().subscribe("newTask",((t,e)=>n.addNewTask(t,e))),k().subscribe("getProject",((t,e)=>n.getProject(t,e))),k().subscribe("inboxNavClick",n.inboxClickHandler),k().subscribe("upcomingNavClick",n.upcomingClickHandler),k().subscribe("todayNavClick",n.todayClickHandler),k().subscribe("urgentNavClick",n.urgentClickHandler),k().subscribe("editProjectClick",((t,e)=>n.editProjectHandler(t,e)))}()})()})();